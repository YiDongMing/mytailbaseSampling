# mytailbaseSampling
云原生编程挑战赛”是“中间件性能挑战赛”的全新升级。初赛有三个赛道供选手选择。在初赛中，我选择了题目涉及技术范围与自己技术范围有交集的赛道一，题目是：实现一个分布式统计和过滤的链路追踪。（https://tianchi.aliyun.com/competition/entrance/231790/information）。
分布式追踪系统可以记录请求范围内的信息，包括用户在页面的一次点击发送请求，这个请求的所有处理过程，比如经过多少个服务，在哪些机器上执行，每个服务的耗时和异常情况。而题目是希望实现的是一种业界中没有开源项目实现的采样方式(tail-based Sampling)，只要请求的链路追踪数据中任何节点出现重要数据特征（错慢请求），这个请求的所有链路数据都采集。主要的挑战是：任何节点出现符合采样条件的链路数据，那就需要把这个请求的所有链路数据采集。即使其他链路数据在这条链路节点数据之前还是之后产生，即使其他链路数据在分布式系统的成百上千台机器上产生。需要实现两个程序，一个是数量流（橙色标记）的处理程序，该机器可以获取数据源的http地址，拉取数据后进行处理，一个是后端程序（蓝色标记），和客户端数据流处理程序通信，将最终数据结果在后端引擎机器上计算。
比赛过程：
关键点：1、因为机器的内存小于数据流的大小，所以需要在客户端程序中对程序进行过滤，将错误的链路信息发给后端引擎，再同步到另外的数据节点
2、后端引擎需要合理的收集2个数据节点的数据，考虑数据节点上报速度快慢不一的情况，超时处理。
